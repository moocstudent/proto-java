package com.implementsfun;

import com.implementsfun.protoj.LaptopMessage.*;
import com.implementsfun.protoj.LaptopServiceGrpc;
import com.implementsfun.protoj.LaptopServiceOuterClass.*;
import com.implementsfun.service.*;
import com.implementsfun.util.Generator;
import io.grpc.ManagedChannel;
import io.grpc.StatusRuntimeException;
import io.grpc.inprocess.InProcessChannelBuilder;
import io.grpc.inprocess.InProcessServerBuilder;
import io.grpc.testing.GrpcCleanupRule;
import org.junit.After;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.*;

/**
 * 这几天点外卖有些多
 * 一个是当时厨房卫生不太好
 * 我也没法再说什么 因为卫生都是舍友要各自保持
 * 而点点这些单里面
 * 有一个鸡公煲还有一个某烤鱼炒菜
 * 现在商家真点不是很大方的
 * 虽然在这个快递里是附赠了卡片加店家拿红包🧧
 * 但实际加了一个买了4单先只给我一单的红包
 * 而另一个炒菜的通过好友居然也不发红包
 * 只有我问是不是回馈红包🧧
 * 天呐忽然回复说只有当天的有效
 * 算了 为了几块钱耽误时间可不值
 * 继续码起来
 */
public class LaptopServerTest {
    @Rule
    public final GrpcCleanupRule grpcCleanupRule = new GrpcCleanupRule();

    private LaptopStore store;
    private LaptopServer server;
    private RatingStore ratingStore;
    private ImageStore imageStore;
    private ManagedChannel channel;



    @Before
    public void setUp() throws IOException {
        String serverName = InProcessServerBuilder.generateName();
        InProcessServerBuilder serverBuilder=
                InProcessServerBuilder.forName(serverName).directExecutor();
        store=new InMemoryLaptopStore();
        imageStore = new DiskImageStore("img");
        ratingStore = new InMemoryRatingStore();
        server=new LaptopServer(serverBuilder,0,store,imageStore,ratingStore);
        server.start();
        channel = grpcCleanupRule.register(
                InProcessChannelBuilder.forName(serverName).directExecutor().build()
        );
    }

    /**
     * 虽然做小生意挺不容易的也是
     * 但是卡片上也没说当天有效
     * 我还傻愣愣地集了几张返现红包卡
     * 算了不去care了
     * 因为至少这个鸡公煲的回复了
     * 我保留了一个评论 也许我的评论也是当天有效吧
     * 那个加了微信连回复都不回复的商家
     * 评论我全给删除了
     * 反正那家炒菜是一般般的
     * 好评只不过是想给快递员的
     * 不过我点餐不会超过1KM外的店
     * 因为他们送来送去也挺累挺辛苦
     */
    @After
    public void tearDown() throws InterruptedException {
        server.stop();
    }

    //创建一个测试关于正常id
    /**
     * /Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/bin/java -Dvisualvm.id=70555429597584 -ea -Didea.test.cyclic.buffer.size=1048576 -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=65397:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit5-rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/rt.jar:/Users/tanghuijuan/proto-java/build/classes/java/test:/Users/tanghuijuan/proto-java/build/classes/java/main:/Users/tanghuijuan/proto-java/build/resources/main:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-all/1.49.0/c9af3f652d037bd562b6b93477866696e7dad57a/grpc-all-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/3.21.5/82f0d4bc703c7850cdf5e2c728f464cf4dff0b3d/protobuf-java-3.21.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.projectlombok/lombok/1.18.24/13a394eed5c4f9efb2a6d956e2086f1d81e857d9/lombok-1.18.24.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-api/5.9.0/a44f7eba3ea214f6ec87ad9fccd3b2ac4681a4/junit-jupiter-api-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.4.0/e15fefb8c34de753a6d358d0be5ae16b9928a0bd/logback-classic-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-xds/1.49.0/8ea6a4e02f2736b1557719244a3e51f5419445f5/grpc-xds-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-services/1.49.0/9e7a7a6b41de63a6b702e5ff0a0c11daa2ef3e58/grpc-services-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf/1.49.0/6b678363aad667afac8fceedbc115c6243db42a7/grpc-protobuf-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-auth/1.49.0/aaa254aab3e5e07f05f7d34ad3aaf8a23f5653/grpc-auth-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty/1.49.0/7761c7c61dc62ab685ea8ef44cd3b5231de6db58/grpc-netty-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-okhttp/1.49.0/2b6a85d799f3a2ccf2819e513b31d3831fdcd3c8/grpc-okhttp-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-testing/1.49.0/714c94d005eb75235294c33c21eaa638c4da508f/grpc-testing-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-core/1.49.0/78fb298b336ddeb3a59313efdf153b7a86eb6b2c/grpc-core-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-stub/1.49.0/22181a5c46eb457255b33bc94b84bb45ff22806e/grpc-stub-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-api/1.49.0/c68215eccc846fae786ff3bf09c216952590bc7d/grpc-api-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-context/1.49.0/d689f08dcc0c010f333d832780dd66e68acbd446/grpc-context-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-grpclb/1.49.0/cde96c8826397bb28d3547356f5f5b7395c7fee7/grpc-grpclb-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-rls/1.49.0/af1eded08c02c99c0185d7cd7710cf96ff488af0/grpc-rls-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-commons/1.9.0/b727889107fc28c7460b21d1083212f8ce7602c6/junit-platform-commons-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.opentest4j/opentest4j/1.2.0/28c11eb91f9b6d8e200631d46e20a7f407f2a046/opentest4j-1.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apiguardian/apiguardian-api/1.1.2/a231e0d844d2721b0fa1b238006d15c6ded6842a/apiguardian-api-1.1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.4.0/6d0735943aca5c3218563d951639c3ae738f6b58/logback-core-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.0/82b150a36b504a09076b29c0509e31702c9c3999/slf4j-api-2.0.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-proto/0.2.0/c05b6b32b69d5d9144087ea0ebc6fab183fb9151/opencensus-proto-0.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-alts/1.49.0/3ffe49b4a2db507921b7aa09edacea2bc31ede0f/grpc-alts-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java-util/3.21.1/672ac77f1208a89b3cb03bebba7044e261c2615d/protobuf-java-util-3.21.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty-shaded/1.49.0/f1af9cb1efa30cc835540d29e3f1bbbaf3f54b86/grpc-netty-shaded-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.9.0/8a1167e089096758b49f9b34066ef98b2f4b37aa/gson-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.re2j/re2j/1.6/a13e879fd7971738d06020fefeb108cc14e14169/re2j-1.6.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auto.value/auto-value-annotations/1.9/25a0fcef915f663679fcdb447541c5d86a9be4ba/auto-value-annotations-1.9.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.api.grpc/proto-google-common-protos/2.9.0/e4ada41aaaf6ecdedf132f44251d0d50813f7f90/proto-google-common-protos-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf-lite/1.49.0/ed3825b430523f5d4cf2ff9e652e588ea3635f1a/grpc-protobuf-lite-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-credentials/1.4.0/50f543f1da68956b4dec792c64e2f8a2f1dcf376/google-auth-library-credentials-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http2/4.1.77.Final/9e58eeeacc74f8ad2b2acb240b1f01d2c40159d7/netty-codec-http2-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/guava/31.1-android/9222c47cc3ae890f07f7c961bbb3cb69050fe4aa/guava-31.1-android.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.errorprone/error_prone_annotations/2.14.0/9f01b3654d3c536859705f09f8d267ee977b4004/error_prone_annotations-2.14.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-oauth2-http/1.4.0/948a5c7b51d8f07accafd1be2b12698a22d39908/google-auth-library-oauth2-http-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.conscrypt/conscrypt-openjdk-uber/2.5.2/d858f142ea189c62771c505a6548d8606ac098fe/conscrypt-openjdk-uber-2.5.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.j2objc/j2objc-annotations/1.3/ba035118bc8bac37d7eff77700720999acd9986d/j2objc-annotations-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http/4.1.77.Final/c5ac5afa9af5b4dc0e8bdbfd686979af77ebdb3c/netty-codec-http-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler/4.1.77.Final/47a81089de03635a27f509f3e4e13386ae1db275/netty-handler-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec/4.1.77.Final/4efc5f59335301d6ba0d7cd31dd10651119b03c8/netty-codec-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport/4.1.77.Final/2a3373bbd20d520c821f210bd5ee886788512043/netty-transport-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-buffer/4.1.77.Final/d97571f99e5e739d86824d0df99f35d295276b5f/netty-buffer-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-common/4.1.77.Final/ea0fc20f4e6178966b9d62017b7fcb83dfe0e713/netty-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/failureaccess/1.0.1/1dcf1de382a0bf95a3d8b0849546c88bac1292c9/failureaccess-1.0.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/b421526c5f297295adef1c886e5246c39d4ac629/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.checkerframework/checker-qual/3.12.0/d5692f0526415fcc6de94bb5bfbd3afd9dd3b3e5/checker-qual-3.12.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client-gson/1.41.0/1a754a5dd672218a2ac667d7ff2b28df7a5a240e/google-http-client-gson-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client/1.41.0/6334215e876a7bda17072910e16b150868a7018b/google-http-client-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-resolver/4.1.77.Final/4a239dbf8d8bb5f98aa51462c35011c0516395fd/netty-resolver-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-contrib-http-util/0.28.0/f6cb276330197d51dd65327fc305a3df7e622705/opencensus-contrib-http-util-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-api/0.28.0/fc0d06a9d975a38c581dff59b99cf31db78bd99/opencensus-api-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.13/e5f6cae5ca7ecaac1ec2827a9e2d65ae2869cada/httpclient-4.5.13.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.15/7f2e0c573eaa7a74bac2e89b359e1f73d92a0a1d/httpcore-4.4.15.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-codec/commons-codec/1.11/3acb4705652e16236558f0f4f2192cc33c3bd189/commons-codec-1.11.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-engine/5.9.0/cc1cb5efae97493dcffb687253a0964ad2e7b99/junit-jupiter-engine-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-engine/1.9.0/bd46891f01817b5ffdd368cb0482a34746610acb/junit-platform-engine-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.perfmark/perfmark-api/0.25.0/340a0c3d81cdcd9ecd7dc2ae00fb2633b469b157/perfmark-api-0.25.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler-proxy/4.1.77.Final/d1ac0d95b770098c46b6679fbfd417ae277012d4/netty-handler-proxy-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport-native-unix-common/4.1.77.Final/c95d53486414b3270d08057957c5da8e0c37e4eb/netty-transport-native-unix-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.17.5/34336f82f14dde1c0752fd5f0546dbf3c3225aba/okio-1.17.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.android/annotations/4.1.1.4/a1678ba907bf92691d879fef34e1a187038f9259/annotations-4.1.1.4.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.codehaus.mojo/animal-sniffer-annotations/1.21/419a9acd297cb6fe6f91b982d909f2c20e9fa5c0/animal-sniffer-annotations-1.21.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-socks/4.1.77.Final/17bb510aa545fc73a18ab804c594593e32de1a1d/netty-codec-socks-4.1.77.Final.jar com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.implementsfun.LaptopServerTest,createLaptopWithAValidID
     * 九月 10, 2022 1:11:54 上午 com.implementsfun.service.LaptopServer start
     * 信息: server started on port: 0
     * 九月 10, 2022 1:11:55 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: get a create-laptop request with ID:f078f69f-0a7c-48ef-aeb3-508e4d78e322
     * 九月 10, 2022 1:11:55 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: save laptop with ID: f078f69f-0a7c-48ef-aeb3-508e4d78e322
     * 九月 10, 2022 1:11:55 上午 com.implementsfun.service.LaptopServer lambda$start$0
     * 信息: shut down gRPC server because JVM shuts down
     */
    @Test
    public void createLaptopWithAValidID(){
        //🆔
        Generator generator = new Generator();
        Laptop laptop = generator.initLaptop();
        CreateLaptopRequest request=
                CreateLaptopRequest.newBuilder().setLaptop(laptop).build();
        /**
         * 其实这种事情确实不提倡
         * 但是发生了 就制止吧！
         */
        LaptopServiceGrpc.LaptopServiceBlockingStub stub =
                LaptopServiceGrpc.newBlockingStub(channel);
        CreateLaptopResponse response = stub.createLaptop(request);
        assertNotNull(response);
        assertEquals(laptop.getId(),response.getId());

        Laptop found = store.find(response.getId());
        assertNotNull(found);

    }

    //创建一个测试关于空id
    /**
     * /Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/bin/java -Dvisualvm.id=70641481795709 -ea -Didea.test.cyclic.buffer.size=1048576 -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=65408:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit5-rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/rt.jar:/Users/tanghuijuan/proto-java/build/classes/java/test:/Users/tanghuijuan/proto-java/build/classes/java/main:/Users/tanghuijuan/proto-java/build/resources/main:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-all/1.49.0/c9af3f652d037bd562b6b93477866696e7dad57a/grpc-all-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/3.21.5/82f0d4bc703c7850cdf5e2c728f464cf4dff0b3d/protobuf-java-3.21.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.projectlombok/lombok/1.18.24/13a394eed5c4f9efb2a6d956e2086f1d81e857d9/lombok-1.18.24.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-api/5.9.0/a44f7eba3ea214f6ec87ad9fccd3b2ac4681a4/junit-jupiter-api-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.4.0/e15fefb8c34de753a6d358d0be5ae16b9928a0bd/logback-classic-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-xds/1.49.0/8ea6a4e02f2736b1557719244a3e51f5419445f5/grpc-xds-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-services/1.49.0/9e7a7a6b41de63a6b702e5ff0a0c11daa2ef3e58/grpc-services-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf/1.49.0/6b678363aad667afac8fceedbc115c6243db42a7/grpc-protobuf-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-auth/1.49.0/aaa254aab3e5e07f05f7d34ad3aaf8a23f5653/grpc-auth-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty/1.49.0/7761c7c61dc62ab685ea8ef44cd3b5231de6db58/grpc-netty-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-okhttp/1.49.0/2b6a85d799f3a2ccf2819e513b31d3831fdcd3c8/grpc-okhttp-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-testing/1.49.0/714c94d005eb75235294c33c21eaa638c4da508f/grpc-testing-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-core/1.49.0/78fb298b336ddeb3a59313efdf153b7a86eb6b2c/grpc-core-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-stub/1.49.0/22181a5c46eb457255b33bc94b84bb45ff22806e/grpc-stub-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-api/1.49.0/c68215eccc846fae786ff3bf09c216952590bc7d/grpc-api-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-context/1.49.0/d689f08dcc0c010f333d832780dd66e68acbd446/grpc-context-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-grpclb/1.49.0/cde96c8826397bb28d3547356f5f5b7395c7fee7/grpc-grpclb-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-rls/1.49.0/af1eded08c02c99c0185d7cd7710cf96ff488af0/grpc-rls-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-commons/1.9.0/b727889107fc28c7460b21d1083212f8ce7602c6/junit-platform-commons-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.opentest4j/opentest4j/1.2.0/28c11eb91f9b6d8e200631d46e20a7f407f2a046/opentest4j-1.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apiguardian/apiguardian-api/1.1.2/a231e0d844d2721b0fa1b238006d15c6ded6842a/apiguardian-api-1.1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.4.0/6d0735943aca5c3218563d951639c3ae738f6b58/logback-core-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.0/82b150a36b504a09076b29c0509e31702c9c3999/slf4j-api-2.0.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-proto/0.2.0/c05b6b32b69d5d9144087ea0ebc6fab183fb9151/opencensus-proto-0.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-alts/1.49.0/3ffe49b4a2db507921b7aa09edacea2bc31ede0f/grpc-alts-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java-util/3.21.1/672ac77f1208a89b3cb03bebba7044e261c2615d/protobuf-java-util-3.21.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty-shaded/1.49.0/f1af9cb1efa30cc835540d29e3f1bbbaf3f54b86/grpc-netty-shaded-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.9.0/8a1167e089096758b49f9b34066ef98b2f4b37aa/gson-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.re2j/re2j/1.6/a13e879fd7971738d06020fefeb108cc14e14169/re2j-1.6.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auto.value/auto-value-annotations/1.9/25a0fcef915f663679fcdb447541c5d86a9be4ba/auto-value-annotations-1.9.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.api.grpc/proto-google-common-protos/2.9.0/e4ada41aaaf6ecdedf132f44251d0d50813f7f90/proto-google-common-protos-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf-lite/1.49.0/ed3825b430523f5d4cf2ff9e652e588ea3635f1a/grpc-protobuf-lite-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-credentials/1.4.0/50f543f1da68956b4dec792c64e2f8a2f1dcf376/google-auth-library-credentials-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http2/4.1.77.Final/9e58eeeacc74f8ad2b2acb240b1f01d2c40159d7/netty-codec-http2-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/guava/31.1-android/9222c47cc3ae890f07f7c961bbb3cb69050fe4aa/guava-31.1-android.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.errorprone/error_prone_annotations/2.14.0/9f01b3654d3c536859705f09f8d267ee977b4004/error_prone_annotations-2.14.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-oauth2-http/1.4.0/948a5c7b51d8f07accafd1be2b12698a22d39908/google-auth-library-oauth2-http-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.conscrypt/conscrypt-openjdk-uber/2.5.2/d858f142ea189c62771c505a6548d8606ac098fe/conscrypt-openjdk-uber-2.5.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.j2objc/j2objc-annotations/1.3/ba035118bc8bac37d7eff77700720999acd9986d/j2objc-annotations-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http/4.1.77.Final/c5ac5afa9af5b4dc0e8bdbfd686979af77ebdb3c/netty-codec-http-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler/4.1.77.Final/47a81089de03635a27f509f3e4e13386ae1db275/netty-handler-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec/4.1.77.Final/4efc5f59335301d6ba0d7cd31dd10651119b03c8/netty-codec-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport/4.1.77.Final/2a3373bbd20d520c821f210bd5ee886788512043/netty-transport-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-buffer/4.1.77.Final/d97571f99e5e739d86824d0df99f35d295276b5f/netty-buffer-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-common/4.1.77.Final/ea0fc20f4e6178966b9d62017b7fcb83dfe0e713/netty-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/failureaccess/1.0.1/1dcf1de382a0bf95a3d8b0849546c88bac1292c9/failureaccess-1.0.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/b421526c5f297295adef1c886e5246c39d4ac629/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.checkerframework/checker-qual/3.12.0/d5692f0526415fcc6de94bb5bfbd3afd9dd3b3e5/checker-qual-3.12.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client-gson/1.41.0/1a754a5dd672218a2ac667d7ff2b28df7a5a240e/google-http-client-gson-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client/1.41.0/6334215e876a7bda17072910e16b150868a7018b/google-http-client-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-resolver/4.1.77.Final/4a239dbf8d8bb5f98aa51462c35011c0516395fd/netty-resolver-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-contrib-http-util/0.28.0/f6cb276330197d51dd65327fc305a3df7e622705/opencensus-contrib-http-util-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-api/0.28.0/fc0d06a9d975a38c581dff59b99cf31db78bd99/opencensus-api-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.13/e5f6cae5ca7ecaac1ec2827a9e2d65ae2869cada/httpclient-4.5.13.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.15/7f2e0c573eaa7a74bac2e89b359e1f73d92a0a1d/httpcore-4.4.15.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-codec/commons-codec/1.11/3acb4705652e16236558f0f4f2192cc33c3bd189/commons-codec-1.11.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-engine/5.9.0/cc1cb5efae97493dcffb687253a0964ad2e7b99/junit-jupiter-engine-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-engine/1.9.0/bd46891f01817b5ffdd368cb0482a34746610acb/junit-platform-engine-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.perfmark/perfmark-api/0.25.0/340a0c3d81cdcd9ecd7dc2ae00fb2633b469b157/perfmark-api-0.25.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler-proxy/4.1.77.Final/d1ac0d95b770098c46b6679fbfd417ae277012d4/netty-handler-proxy-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport-native-unix-common/4.1.77.Final/c95d53486414b3270d08057957c5da8e0c37e4eb/netty-transport-native-unix-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.17.5/34336f82f14dde1c0752fd5f0546dbf3c3225aba/okio-1.17.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.android/annotations/4.1.1.4/a1678ba907bf92691d879fef34e1a187038f9259/annotations-4.1.1.4.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.codehaus.mojo/animal-sniffer-annotations/1.21/419a9acd297cb6fe6f91b982d909f2c20e9fa5c0/animal-sniffer-annotations-1.21.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-socks/4.1.77.Final/17bb510aa545fc73a18ab804c594593e32de1a1d/netty-codec-socks-4.1.77.Final.jar com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.implementsfun.LaptopServerTest,createLaptopWithAnEmptyID
     * 九月 10, 2022 1:13:21 上午 com.implementsfun.service.LaptopServer start
     * 信息: server started on port: 0
     * 九月 10, 2022 1:13:21 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: get a create-laptop request with ID:
     * 九月 10, 2022 1:13:21 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: save laptop with ID: b2c63258-f7ee-4ef0-8078-d99c46f484b4
     * 九月 10, 2022 1:13:21 上午 com.implementsfun.service.LaptopServer lambda$start$0
     * 信息: shut down gRPC server because JVM shuts down
     */
    @Test
    public void createLaptopWithAnEmptyID(){
        Generator generator = new Generator();
        Laptop laptop = generator.initLaptop().toBuilder().setId("").build();
        CreateLaptopRequest request=
                CreateLaptopRequest.newBuilder().setLaptop(laptop).build();

        LaptopServiceGrpc.LaptopServiceBlockingStub stub=
                LaptopServiceGrpc.newBlockingStub(channel);
        CreateLaptopResponse response = stub.createLaptop(request);
        assertNotNull(response);
        assertFalse(response.getId().isEmpty());

        Laptop found = store.find(response.getId());
        assertNotNull(found);
    }

    //创建一个测试关于非法id
    /**
     * /Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/bin/java -Dvisualvm.id=70688915849334 -ea -Didea.test.cyclic.buffer.size=1048576 -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=65418:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit5-rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/rt.jar:/Users/tanghuijuan/proto-java/build/classes/java/test:/Users/tanghuijuan/proto-java/build/classes/java/main:/Users/tanghuijuan/proto-java/build/resources/main:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-all/1.49.0/c9af3f652d037bd562b6b93477866696e7dad57a/grpc-all-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/3.21.5/82f0d4bc703c7850cdf5e2c728f464cf4dff0b3d/protobuf-java-3.21.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.projectlombok/lombok/1.18.24/13a394eed5c4f9efb2a6d956e2086f1d81e857d9/lombok-1.18.24.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-api/5.9.0/a44f7eba3ea214f6ec87ad9fccd3b2ac4681a4/junit-jupiter-api-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.4.0/e15fefb8c34de753a6d358d0be5ae16b9928a0bd/logback-classic-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-xds/1.49.0/8ea6a4e02f2736b1557719244a3e51f5419445f5/grpc-xds-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-services/1.49.0/9e7a7a6b41de63a6b702e5ff0a0c11daa2ef3e58/grpc-services-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf/1.49.0/6b678363aad667afac8fceedbc115c6243db42a7/grpc-protobuf-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-auth/1.49.0/aaa254aab3e5e07f05f7d34ad3aaf8a23f5653/grpc-auth-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty/1.49.0/7761c7c61dc62ab685ea8ef44cd3b5231de6db58/grpc-netty-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-okhttp/1.49.0/2b6a85d799f3a2ccf2819e513b31d3831fdcd3c8/grpc-okhttp-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-testing/1.49.0/714c94d005eb75235294c33c21eaa638c4da508f/grpc-testing-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-core/1.49.0/78fb298b336ddeb3a59313efdf153b7a86eb6b2c/grpc-core-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-stub/1.49.0/22181a5c46eb457255b33bc94b84bb45ff22806e/grpc-stub-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-api/1.49.0/c68215eccc846fae786ff3bf09c216952590bc7d/grpc-api-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-context/1.49.0/d689f08dcc0c010f333d832780dd66e68acbd446/grpc-context-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-grpclb/1.49.0/cde96c8826397bb28d3547356f5f5b7395c7fee7/grpc-grpclb-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-rls/1.49.0/af1eded08c02c99c0185d7cd7710cf96ff488af0/grpc-rls-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-commons/1.9.0/b727889107fc28c7460b21d1083212f8ce7602c6/junit-platform-commons-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.opentest4j/opentest4j/1.2.0/28c11eb91f9b6d8e200631d46e20a7f407f2a046/opentest4j-1.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apiguardian/apiguardian-api/1.1.2/a231e0d844d2721b0fa1b238006d15c6ded6842a/apiguardian-api-1.1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.4.0/6d0735943aca5c3218563d951639c3ae738f6b58/logback-core-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.0/82b150a36b504a09076b29c0509e31702c9c3999/slf4j-api-2.0.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-proto/0.2.0/c05b6b32b69d5d9144087ea0ebc6fab183fb9151/opencensus-proto-0.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-alts/1.49.0/3ffe49b4a2db507921b7aa09edacea2bc31ede0f/grpc-alts-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java-util/3.21.1/672ac77f1208a89b3cb03bebba7044e261c2615d/protobuf-java-util-3.21.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty-shaded/1.49.0/f1af9cb1efa30cc835540d29e3f1bbbaf3f54b86/grpc-netty-shaded-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.9.0/8a1167e089096758b49f9b34066ef98b2f4b37aa/gson-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.re2j/re2j/1.6/a13e879fd7971738d06020fefeb108cc14e14169/re2j-1.6.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auto.value/auto-value-annotations/1.9/25a0fcef915f663679fcdb447541c5d86a9be4ba/auto-value-annotations-1.9.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.api.grpc/proto-google-common-protos/2.9.0/e4ada41aaaf6ecdedf132f44251d0d50813f7f90/proto-google-common-protos-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf-lite/1.49.0/ed3825b430523f5d4cf2ff9e652e588ea3635f1a/grpc-protobuf-lite-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-credentials/1.4.0/50f543f1da68956b4dec792c64e2f8a2f1dcf376/google-auth-library-credentials-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http2/4.1.77.Final/9e58eeeacc74f8ad2b2acb240b1f01d2c40159d7/netty-codec-http2-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/guava/31.1-android/9222c47cc3ae890f07f7c961bbb3cb69050fe4aa/guava-31.1-android.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.errorprone/error_prone_annotations/2.14.0/9f01b3654d3c536859705f09f8d267ee977b4004/error_prone_annotations-2.14.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-oauth2-http/1.4.0/948a5c7b51d8f07accafd1be2b12698a22d39908/google-auth-library-oauth2-http-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.conscrypt/conscrypt-openjdk-uber/2.5.2/d858f142ea189c62771c505a6548d8606ac098fe/conscrypt-openjdk-uber-2.5.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.j2objc/j2objc-annotations/1.3/ba035118bc8bac37d7eff77700720999acd9986d/j2objc-annotations-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http/4.1.77.Final/c5ac5afa9af5b4dc0e8bdbfd686979af77ebdb3c/netty-codec-http-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler/4.1.77.Final/47a81089de03635a27f509f3e4e13386ae1db275/netty-handler-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec/4.1.77.Final/4efc5f59335301d6ba0d7cd31dd10651119b03c8/netty-codec-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport/4.1.77.Final/2a3373bbd20d520c821f210bd5ee886788512043/netty-transport-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-buffer/4.1.77.Final/d97571f99e5e739d86824d0df99f35d295276b5f/netty-buffer-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-common/4.1.77.Final/ea0fc20f4e6178966b9d62017b7fcb83dfe0e713/netty-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/failureaccess/1.0.1/1dcf1de382a0bf95a3d8b0849546c88bac1292c9/failureaccess-1.0.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/b421526c5f297295adef1c886e5246c39d4ac629/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.checkerframework/checker-qual/3.12.0/d5692f0526415fcc6de94bb5bfbd3afd9dd3b3e5/checker-qual-3.12.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client-gson/1.41.0/1a754a5dd672218a2ac667d7ff2b28df7a5a240e/google-http-client-gson-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client/1.41.0/6334215e876a7bda17072910e16b150868a7018b/google-http-client-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-resolver/4.1.77.Final/4a239dbf8d8bb5f98aa51462c35011c0516395fd/netty-resolver-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-contrib-http-util/0.28.0/f6cb276330197d51dd65327fc305a3df7e622705/opencensus-contrib-http-util-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-api/0.28.0/fc0d06a9d975a38c581dff59b99cf31db78bd99/opencensus-api-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.13/e5f6cae5ca7ecaac1ec2827a9e2d65ae2869cada/httpclient-4.5.13.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.15/7f2e0c573eaa7a74bac2e89b359e1f73d92a0a1d/httpcore-4.4.15.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-codec/commons-codec/1.11/3acb4705652e16236558f0f4f2192cc33c3bd189/commons-codec-1.11.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-engine/5.9.0/cc1cb5efae97493dcffb687253a0964ad2e7b99/junit-jupiter-engine-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-engine/1.9.0/bd46891f01817b5ffdd368cb0482a34746610acb/junit-platform-engine-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.perfmark/perfmark-api/0.25.0/340a0c3d81cdcd9ecd7dc2ae00fb2633b469b157/perfmark-api-0.25.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler-proxy/4.1.77.Final/d1ac0d95b770098c46b6679fbfd417ae277012d4/netty-handler-proxy-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport-native-unix-common/4.1.77.Final/c95d53486414b3270d08057957c5da8e0c37e4eb/netty-transport-native-unix-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.17.5/34336f82f14dde1c0752fd5f0546dbf3c3225aba/okio-1.17.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.android/annotations/4.1.1.4/a1678ba907bf92691d879fef34e1a187038f9259/annotations-4.1.1.4.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.codehaus.mojo/animal-sniffer-annotations/1.21/419a9acd297cb6fe6f91b982d909f2c20e9fa5c0/animal-sniffer-annotations-1.21.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-socks/4.1.77.Final/17bb510aa545fc73a18ab804c594593e32de1a1d/netty-codec-socks-4.1.77.Final.jar com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.implementsfun.LaptopServerTest,createLaptopWithAnInvalidID
     * 九月 10, 2022 1:14:08 上午 com.implementsfun.service.LaptopServer start
     * 信息: server started on port: 0
     * 九月 10, 2022 1:14:08 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: get a create-laptop request with ID:invalid
     * 九月 10, 2022 1:14:08 上午 com.implementsfun.service.LaptopServer lambda$start$0
     * 信息: shut down gRPC server because JVM shuts down
     */
    @Test(expected = StatusRuntimeException.class)
    public void createLaptopWithAnInvalidID(){
        Generator generator = new Generator();
        Laptop laptop =
                generator.initLaptop().toBuilder()
                        .setId("invalid").build();
        CreateLaptopRequest request=
                CreateLaptopRequest.newBuilder().setLaptop(laptop).build();
        LaptopServiceGrpc.LaptopServiceBlockingStub stub=
                LaptopServiceGrpc.newBlockingStub(channel);
        CreateLaptopResponse response = stub.createLaptop(request);
        assertNull(response);
        assertNull(response.getId());
    }

    //创建一个测试关于非法id
    //有Exception是因为当前gRPC版本并不完善但不影响结果
    /**
     * /Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/bin/java -Dvisualvm.id=70765253934584 -ea -Didea.test.cyclic.buffer.size=1048576 -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=65426:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit5-rt.jar:/Applications/IntelliJ IDEA CE.app/Contents/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home/jre/lib/rt.jar:/Users/tanghuijuan/proto-java/build/classes/java/test:/Users/tanghuijuan/proto-java/build/classes/java/main:/Users/tanghuijuan/proto-java/build/resources/main:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-all/1.49.0/c9af3f652d037bd562b6b93477866696e7dad57a/grpc-all-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/3.21.5/82f0d4bc703c7850cdf5e2c728f464cf4dff0b3d/protobuf-java-3.21.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.projectlombok/lombok/1.18.24/13a394eed5c4f9efb2a6d956e2086f1d81e857d9/lombok-1.18.24.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-api/5.9.0/a44f7eba3ea214f6ec87ad9fccd3b2ac4681a4/junit-jupiter-api-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.4.0/e15fefb8c34de753a6d358d0be5ae16b9928a0bd/logback-classic-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-xds/1.49.0/8ea6a4e02f2736b1557719244a3e51f5419445f5/grpc-xds-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-services/1.49.0/9e7a7a6b41de63a6b702e5ff0a0c11daa2ef3e58/grpc-services-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf/1.49.0/6b678363aad667afac8fceedbc115c6243db42a7/grpc-protobuf-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-auth/1.49.0/aaa254aab3e5e07f05f7d34ad3aaf8a23f5653/grpc-auth-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty/1.49.0/7761c7c61dc62ab685ea8ef44cd3b5231de6db58/grpc-netty-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-okhttp/1.49.0/2b6a85d799f3a2ccf2819e513b31d3831fdcd3c8/grpc-okhttp-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-testing/1.49.0/714c94d005eb75235294c33c21eaa638c4da508f/grpc-testing-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-core/1.49.0/78fb298b336ddeb3a59313efdf153b7a86eb6b2c/grpc-core-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-stub/1.49.0/22181a5c46eb457255b33bc94b84bb45ff22806e/grpc-stub-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-api/1.49.0/c68215eccc846fae786ff3bf09c216952590bc7d/grpc-api-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-context/1.49.0/d689f08dcc0c010f333d832780dd66e68acbd446/grpc-context-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-grpclb/1.49.0/cde96c8826397bb28d3547356f5f5b7395c7fee7/grpc-grpclb-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-rls/1.49.0/af1eded08c02c99c0185d7cd7710cf96ff488af0/grpc-rls-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-commons/1.9.0/b727889107fc28c7460b21d1083212f8ce7602c6/junit-platform-commons-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.opentest4j/opentest4j/1.2.0/28c11eb91f9b6d8e200631d46e20a7f407f2a046/opentest4j-1.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apiguardian/apiguardian-api/1.1.2/a231e0d844d2721b0fa1b238006d15c6ded6842a/apiguardian-api-1.1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.4.0/6d0735943aca5c3218563d951639c3ae738f6b58/logback-core-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.0/82b150a36b504a09076b29c0509e31702c9c3999/slf4j-api-2.0.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-proto/0.2.0/c05b6b32b69d5d9144087ea0ebc6fab183fb9151/opencensus-proto-0.2.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-alts/1.49.0/3ffe49b4a2db507921b7aa09edacea2bc31ede0f/grpc-alts-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java-util/3.21.1/672ac77f1208a89b3cb03bebba7044e261c2615d/protobuf-java-util-3.21.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-netty-shaded/1.49.0/f1af9cb1efa30cc835540d29e3f1bbbaf3f54b86/grpc-netty-shaded-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.9.0/8a1167e089096758b49f9b34066ef98b2f4b37aa/gson-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.re2j/re2j/1.6/a13e879fd7971738d06020fefeb108cc14e14169/re2j-1.6.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auto.value/auto-value-annotations/1.9/25a0fcef915f663679fcdb447541c5d86a9be4ba/auto-value-annotations-1.9.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.api.grpc/proto-google-common-protos/2.9.0/e4ada41aaaf6ecdedf132f44251d0d50813f7f90/proto-google-common-protos-2.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.grpc/grpc-protobuf-lite/1.49.0/ed3825b430523f5d4cf2ff9e652e588ea3635f1a/grpc-protobuf-lite-1.49.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-credentials/1.4.0/50f543f1da68956b4dec792c64e2f8a2f1dcf376/google-auth-library-credentials-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http2/4.1.77.Final/9e58eeeacc74f8ad2b2acb240b1f01d2c40159d7/netty-codec-http2-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/guava/31.1-android/9222c47cc3ae890f07f7c961bbb3cb69050fe4aa/guava-31.1-android.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.errorprone/error_prone_annotations/2.14.0/9f01b3654d3c536859705f09f8d267ee977b4004/error_prone_annotations-2.14.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.auth/google-auth-library-oauth2-http/1.4.0/948a5c7b51d8f07accafd1be2b12698a22d39908/google-auth-library-oauth2-http-1.4.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.conscrypt/conscrypt-openjdk-uber/2.5.2/d858f142ea189c62771c505a6548d8606ac098fe/conscrypt-openjdk-uber-2.5.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.j2objc/j2objc-annotations/1.3/ba035118bc8bac37d7eff77700720999acd9986d/j2objc-annotations-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-http/4.1.77.Final/c5ac5afa9af5b4dc0e8bdbfd686979af77ebdb3c/netty-codec-http-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler/4.1.77.Final/47a81089de03635a27f509f3e4e13386ae1db275/netty-handler-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec/4.1.77.Final/4efc5f59335301d6ba0d7cd31dd10651119b03c8/netty-codec-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport/4.1.77.Final/2a3373bbd20d520c821f210bd5ee886788512043/netty-transport-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-buffer/4.1.77.Final/d97571f99e5e739d86824d0df99f35d295276b5f/netty-buffer-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-common/4.1.77.Final/ea0fc20f4e6178966b9d62017b7fcb83dfe0e713/netty-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/failureaccess/1.0.1/1dcf1de382a0bf95a3d8b0849546c88bac1292c9/failureaccess-1.0.1.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/b421526c5f297295adef1c886e5246c39d4ac629/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.checkerframework/checker-qual/3.12.0/d5692f0526415fcc6de94bb5bfbd3afd9dd3b3e5/checker-qual-3.12.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client-gson/1.41.0/1a754a5dd672218a2ac667d7ff2b28df7a5a240e/google-http-client-gson-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.http-client/google-http-client/1.41.0/6334215e876a7bda17072910e16b150868a7018b/google-http-client-1.41.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-resolver/4.1.77.Final/4a239dbf8d8bb5f98aa51462c35011c0516395fd/netty-resolver-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-contrib-http-util/0.28.0/f6cb276330197d51dd65327fc305a3df7e622705/opencensus-contrib-http-util-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.opencensus/opencensus-api/0.28.0/fc0d06a9d975a38c581dff59b99cf31db78bd99/opencensus-api-0.28.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.13/e5f6cae5ca7ecaac1ec2827a9e2d65ae2869cada/httpclient-4.5.13.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.15/7f2e0c573eaa7a74bac2e89b359e1f73d92a0a1d/httpcore-4.4.15.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/commons-codec/commons-codec/1.11/3acb4705652e16236558f0f4f2192cc33c3bd189/commons-codec-1.11.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.jupiter/junit-jupiter-engine/5.9.0/cc1cb5efae97493dcffb687253a0964ad2e7b99/junit-jupiter-engine-5.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.junit.platform/junit-platform-engine/1.9.0/bd46891f01817b5ffdd368cb0482a34746610acb/junit-platform-engine-1.9.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.perfmark/perfmark-api/0.25.0/340a0c3d81cdcd9ecd7dc2ae00fb2633b469b157/perfmark-api-0.25.0.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-handler-proxy/4.1.77.Final/d1ac0d95b770098c46b6679fbfd417ae277012d4/netty-handler-proxy-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-transport-native-unix-common/4.1.77.Final/c95d53486414b3270d08057957c5da8e0c37e4eb/netty-transport-native-unix-common-4.1.77.Final.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.17.5/34336f82f14dde1c0752fd5f0546dbf3c3225aba/okio-1.17.5.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/com.google.android/annotations/4.1.1.4/a1678ba907bf92691d879fef34e1a187038f9259/annotations-4.1.1.4.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/org.codehaus.mojo/animal-sniffer-annotations/1.21/419a9acd297cb6fe6f91b982d909f2c20e9fa5c0/animal-sniffer-annotations-1.21.jar:/Users/tanghuijuan/.gradle/caches/modules-2/files-2.1/io.netty/netty-codec-socks/4.1.77.Final/17bb510aa545fc73a18ab804c594593e32de1a1d/netty-codec-socks-4.1.77.Final.jar com.intellij.rt.junit.JUnitStarter -ideVersion5 -junit4 com.implementsfun.LaptopServerTest,createLaptopWithAnAlreadyExistsID
     * 九月 10, 2022 1:15:24 上午 com.implementsfun.service.LaptopServer start
     * 信息: server started on port: 0
     * 九月 10, 2022 1:15:25 上午 com.implementsfun.service.LaptopService createLaptop
     * 信息: get a create-laptop request with ID:05e3b5c9-674e-4749-9399-c9809fc63de9
     */
    @Test(expected = StatusRuntimeException.class)
    public void createLaptopWithAnAlreadyExistsID(){
        Generator generator = new Generator();
        Laptop laptop = generator.initLaptop();
        store.save(laptop);
        CreateLaptopRequest request =
                CreateLaptopRequest.newBuilder().setLaptop(laptop).build();
        LaptopServiceGrpc.LaptopServiceBlockingStub stub=
                LaptopServiceGrpc.newBlockingStub(channel);
        CreateLaptopResponse response = stub.createLaptop(request);
    }
}
